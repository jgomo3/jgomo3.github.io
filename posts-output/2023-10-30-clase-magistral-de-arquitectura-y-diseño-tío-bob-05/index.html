<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Blog de Jesús Gómez (jgomo3): Clase magistral de arquitectura y diseño (día 5) - Principio de Substitución de Liskov</title>
    
<meta name="keywords" content="seq,ftp-hog,arquitectura,CLI,diseño,evaluación perezosa,ocp,limpia,programación,Python,MailHog,principios,Rake,limpio,organizado,software,desarrollo,srp,organizada,Ruby,Clojure CLI,solid,tío bob,lazy-seq,Clojure,jar,es,psl,principio abierto/cerrado,generators,lazy,open close principle,robert c. martin,Java,principio de substitución de liskov,generadores">

<meta name="description" content="Desde el pasado 6 de septiembre hasta el 13 de diciembre, todos los
miércoles (excepto por 2) Robert
C. Martin (mejor
conocido como «El tío Bob»), ha impartido y estará impartiendo una
clase magistral dedicada a la Arquitectura de Software.Cada clase dura aproximadamente 2 horas y es impartida por Zoom.">

<meta property="og:description" content="Desde el pasado 6 de septiembre hasta el 13 de diciembre, todos los
miércoles (excepto por 2) Robert
C. Martin (mejor
conocido como «El tío Bob»), ha impartido y estará impartiendo una
clase magistral dedicada a la Arquitectura de Software.Cada clase dura aproximadamente 2 horas y es impartida por Zoom.">

<meta property="og:url" content="http://jgomo3.info/posts-output/2023-10-30-clase-magistral-de-arquitectura-y-diseño-tío-bob-05/" />
<meta property="og:title" content="Clase magistral de arquitectura y diseño (día 5) - Principio de Substitución de Liskov" />
<meta property="og:type" content="article" />

    <link rel="canonical" href="http://jgomo3.info/posts-output/2023-10-30-clase-magistral-de-arquitectura-y-diseño-tío-bob-05/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Blog de Jesús Gómez (jgomo3)</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/">Home</a></li>
                <li
                ><a href="/archives/">Archives</a></li>
                
                <li
                >
                <a href="/pages-output/acerca-de-mi/">Acerca de mi</a>
                </li>
                
                <li><a href="/feed.xml">RSS</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                        More <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <!-- <li class="dropdown-header">Links</li> -->
                        <!-- <li><a href="http://cryogenweb.org/docs/home.html">Cryogen Docs</a></li> -->
                        <!-- <li><a href="https://carmen.la/blog/archives/">Carmen's Blog</a></li> -->
                        
                        <li><a href="/pages-output/rake-dependencias-y-archivos/">Rake, dependencias y archivos</a></li>
                        

                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Recent Posts</li>
                        
                        <li><a href="/posts-output/2023-10-30-clase-magistral-de-arquitectura-y-diseño-tío-bob-05/">Clase magistral de arquitectura y diseño (día 5) - Principio de Substitución de Liskov</a></li>
                        
                        <li><a href="/posts-output/2023-10-15-clase-magistral-de-arquitectura-y-diseño-tío-bob-04/">Clase magistral de arquitectura y diseño (día 4)</a></li>
                        
                        <li><a href="/posts-output/2023-10-03-clase-magistral-de-arquitectura-y-diseño-tío-bob-03/">Clase magistral de arquitectura y diseño (día 3)</a></li>
                        
                        

                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Tags</li>
                        
                        <li><a href="/tags-output/seq/">seq</a></li>
                        
                        <li><a href="/tags-output/ftp-hog/">ftp-hog</a></li>
                        
                        <li><a href="/tags-output/arquitectura/">arquitectura</a></li>
                        
                        <li><a href="/tags-output/CLI/">CLI</a></li>
                        
                        <li><a href="/tags-output/dise%C3%B1o/">diseño</a></li>
                        
                        <li><a href="/tags-output/evaluaci%C3%B3n%20perezosa/">evaluación perezosa</a></li>
                        
                        <li><a href="/tags-output/ocp/">ocp</a></li>
                        
                        <li><a href="/tags-output/limpia/">limpia</a></li>
                        
                        <li><a href="/tags-output/programaci%C3%B3n/">programación</a></li>
                        
                        <li><a href="/tags-output/Python/">Python</a></li>
                        
                        <li><a href="/tags-output/MailHog/">MailHog</a></li>
                        
                        <li><a href="/tags-output/principios/">principios</a></li>
                        
                        <li><a href="/tags-output/Rake/">Rake</a></li>
                        
                        <li><a href="/tags-output/limpio/">limpio</a></li>
                        
                        <li><a href="/tags-output/organizado/">organizado</a></li>
                        
                        <li><a href="/tags-output/software/">software</a></li>
                        
                        <li><a href="/tags-output/desarrollo/">desarrollo</a></li>
                        
                        <li><a href="/tags-output/srp/">srp</a></li>
                        
                        <li><a href="/tags-output/organizada/">organizada</a></li>
                        
                        <li><a href="/tags-output/Ruby/">Ruby</a></li>
                        
                        <li><a href="/tags-output/Clojure%20CLI/">Clojure CLI</a></li>
                        
                        <li><a href="/tags-output/solid/">solid</a></li>
                        
                        <li><a href="/tags-output/t%C3%ADo%20bob/">tío bob</a></li>
                        
                        <li><a href="/tags-output/lazy-seq/">lazy-seq</a></li>
                        
                        <li><a href="/tags-output/Clojure/">Clojure</a></li>
                        
                        <li><a href="/tags-output/jar/">jar</a></li>
                        
                        <li><a href="/tags-output/es/">es</a></li>
                        
                        <li><a href="/tags-output/psl/">psl</a></li>
                        
                        <li><a href="/tags-output/principio%20abierto%2Fcerrado/">principio abierto/cerrado</a></li>
                        
                        <li><a href="/tags-output/generators/">generators</a></li>
                        
                        <li><a href="/tags-output/lazy/">lazy</a></li>
                        
                        <li><a href="/tags-output/open%20close%20principle/">open close principle</a></li>
                        
                        <li><a href="/tags-output/robert%20c.%20martin/">robert c. martin</a></li>
                        
                        <li><a href="/tags-output/Java/">Java</a></li>
                        
                        <li><a href="/tags-output/principio%20de%20substituci%C3%B3n%20de%20liskov/">principio de substitución de liskov</a></li>
                        
                        <li><a href="/tags-output/generadores/">generadores</a></li>
                        
                        
                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-12">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">October 30, 2023</div>
        
    </div>
    <h2>Clase magistral de arquitectura y diseño (día 5) - Principio de Substitución de Liskov</h2>
</div>
<div>
    
    <p>Desde el pasado 6 de septiembre hasta el 13 de diciembre, todos los
miércoles (excepto por 2) <a href="https://es.wikipedia.org/wiki/Robert_C._Martin">Robert
C. Martin</a> (mejor
conocido como «El tío Bob»), ha impartido y estará impartiendo una
clase magistral dedicada a la Arquitectura de Software.</p><p>Cada clase dura aproximadamente 2 horas y es impartida por Zoom.</p><p>Por mi parte, dedicaré una entrada al blog por cada clase a la que
asista, con la intención de registrar parte de mis notas y las
reflexiones que me surjan cada vez.</p><h1 id="día-5-el-principio-de-substitución-de-liskov-lsp">Día 5: El Principio de Substitución de Liskov (LSP)</h1><h2 id="tipos">Tipos</h2><h3 id="qué-es-un-tipo">¿Qué es un tipo?</h3><p>Independientemente de la codificación de los operandos, mientras las
operaciones produzcan resultados consistentes, ahí tienes un tipo.</p><h3 id="que-es-un-subtipo">¿Que es un subtipo?</h3><p>Una definición particular de «Subtipo» conocida como <a href="https://es.wikipedia.org/wiki/Principio_de_sustituci%C3%B3n_de_Liskov">«El Principio de
substitución de
Liskov»</a>
dice que:</p><p>Dado los tipos <strong>S</strong> y <strong>T</strong>, y el programa <strong>P</strong> que usa <strong>T</strong>.</p><p>Si modificamos el programa <strong>P</strong> solamente haciendo que que use <strong>S</strong>
en vez de <strong>T</strong>, y este sigue funcionando igualmente, entonces <strong>S</strong>
es un subtipo de <strong>T</strong>.</p><h2 id="es-una-isa">«Es un(a)» (ISA)</h2><p>La Inteligencia Artificial fue un campo muy importante entre los 70's
y principios de los 80's. Durante ese período hubo un auge de
investigación en el campo.</p><p>Un área en particular eran <strong>las redes de inferencia</strong>: objetos
conectados por relaciones de inferencia (como «huele a», «sabe a», «es
un(a)», «tiene un((os), a(s))», etc.). Las relaciones «es un(a)», que
en inglés sería «is a» se escribían en los artículos y diagramas como
«ISA».</p><p>Una vez la Inteligencia Artificial perdió empuje en la industria y en
la academia, muchos de los investigadores de esa área consiguieron
refugio en la gran ola del momento (mediados de los 80s y los 90s): La
programación orientada a objetos.</p><p>Ahí encontraron que el concepto de «herencia» era muy similar a la
relación «ISA» de las redes de inferencia, y desde entonces ha sido
muy normal utilizar ambos términos como lo mismo. Sin embargo, veremos
que no son exactamente iguales y por ende ha causado bastante
confusión.</p><p><img src="/img/polimorfismo.svg" alt="img" /></p><h2 id="el-problema-del-cuadrado-y-el-rectángulo">El problema del Cuadrado y el Rectángulo</h2><p>Considere el siguiente diagrama de clases, que describe las clases
«Rectángulo», «Cuadrado» y «Usuario».</p><p><img src="/img/el-problema-del-cuadrado-y-el-rectángulo.svg" alt="img" /></p><p>En el programa «Usuario», si substituimos un Rectángulo por un
Cuadrado, al invocar establecer_anchura(48) (por ejemplo) ¿Qué debería
pasar con la altura?.</p><p>¿Modificamos la altura automáticamente?¿O el objeto pierde su tipo
«cuadrado» y se convierte en rectángulo?.</p><p>Esta modificación puede causar problemas para el programa <strong>Usuario</strong>
si este no se lo esperaba. En ese caso, decimos que el «Cuadrado» no
puede substituir a un «Rectángulo».</p><p>El ejemplo fue elegido adrede porque lógicamente todo cuadrado es un
rectángulo y por ende deberíamos poder cambiar uno por otro sin
problemas.</p><p>Pero la clase Cuadrado y la clase Rectángulo son solo representantes,
no son realmente cuadrados ni rectángulos. Si en el programa cambias
todas las apariciones de la palabra «Cuadrado» por «XXXX» y todas las
apariciones de la palabra «Rectángulo» por «YYYY», el programa seguirá
funcionando igualmente. Viéndolo de ese modo, puede entenderse sin
ninguna dificultad si la substitución es posible o causa problemas.</p><p><strong>Nota</strong> La regla del representante:</p><p>Los representantes de cosas no comparten las relaciones entre las
cosas que representan.</p><p>Esta violación del principio de substitución de Liskov es una
violación latente del principio Abierto/Cerrado, ya que esta
inconsistencia lógica causará una expresión condicional en el programa
Usuario.</p><p>Esta implicación sucede casi siempre, tanto que se puede decir que es
una regla general.</p><h3 id="contratos">Contratos</h3><p>Hay un contrato entre <strong>Usuario</strong> (P) y el tipo <strong>Rectángulo</strong>, que
<strong>Cuadrado</strong> no respeta.</p><h2 id="isa-no-es-herencia">ISA, NO es Herencia</h2><p><img src="/img/complejo-real-entero.svg" alt="img" /></p><p>El diagrama demuestra por contradicción que la relación de herencia no
puede ser una relación «es un(a)».</p><p>La idea se basa en dos detalles:</p><ol><li>Un entero Sí «es un» Real, pero no puede «heredar» fácilmente sus
detalles de implementación porque normalmente, son
representaciones físicas muy diferentes.</li><li>Un complejo necesita 2 reales, pero estos a su vez son
complejos. Una relación cíclica lógicamente válida, pero imposible
de soportar en la implementación (al momento de representar sus
valores en un computador).</li></ol><h2 id="síntomas">Síntomas</h2><p>Los siguientes son síntomas que pueden indicar una violación al
Principio de Substitución de Liskov:</p><ul><li>Existencia de métodos en clases derivadas que violan el contrato de
las clases base. (Esto es por definición).</li><li>Existencia de métodos en clases derivadas implementados como
métodos que no hacen nada.</li><li>Métodos en clases derivadas que lanzan excepciones
incondicionalmente.</li><li>Typecases (instanceOf, etc.).</li></ul><h2 id="lección">Lección</h2><p>Siempre que definas una relación de herencia, verifica que las clases
derivadas no violen los contratos que ya existen entre las clases base
y sus programas clientes.</p><h3 id="ejemplo">Ejemplo</h3><p>Dadas 2 clases ListaRápida y ListaLenta, que tienen la misma IPA
(API), derivada de Lista: ¿son ellas subtipos de Lista?</p><p>Sí. Pero, la única razón por la que no lo serían fuera que de alguna
manera violaran el contrato que tiene la clase base Lista con el resto
del programa.</p><p>Por ejemplo, si por alguna razón, la velocidad es parte de ese
contrato, y digamos que ListaLenta no cumple con ese requerimiento de
desempeño, entonces deja de ser un subtipo, desde el punto de vista de
este programa con estos requerimientos. Es decir, no puedes sustituir
una ListaRápida por una ListaLenta sin que el programa falle.</p><p>Tenga en cuenta que este hecho supera a cualquier definición de tipos
que declare el código. ListaLenta no es, <em>de facto</em>, un subtipo de
Lista, aunque, <em>de jure</em>, así lo «declare» el código.</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags-output/arquitectura/">arquitectura</a>
    
    <a href="/tags-output/dise%C3%B1o/">diseño</a>
    
    <a href="/tags-output/limpia/">limpia</a>
    
    <a href="/tags-output/programaci%C3%B3n/">programación</a>
    
    <a href="/tags-output/principios/">principios</a>
    
    <a href="/tags-output/limpio/">limpio</a>
    
    <a href="/tags-output/organizado/">organizado</a>
    
    <a href="/tags-output/software/">software</a>
    
    <a href="/tags-output/desarrollo/">desarrollo</a>
    
    <a href="/tags-output/organizada/">organizada</a>
    
    <a href="/tags-output/solid/">solid</a>
    
    <a href="/tags-output/t%C3%ADo%20bob/">tío bob</a>
    
    <a href="/tags-output/es/">es</a>
    
    <a href="/tags-output/psl/">psl</a>
    
    <a href="/tags-output/robert%20c.%20martin/">robert c. martin</a>
    
    <a href="/tags-output/principio%20de%20substituci%C3%B3n%20de%20liskov/">principio de substitución de liskov</a>
    
</div>


    <div id="prev-next">
        
        
        <a class="right" href="/posts-output/2023-10-15-clase-magistral-de-arquitectura-y-diseño-tío-bob-04/">Clase magistral de arquitectura y diseño (día 4) &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "http://jgomo3.info/posts-output/2023-10-30-clase-magistral-de-arquitectura-y-diseño-tío-bob-05/";
            this.page.identifier = "Clase magistral de arquitectura y diseño (día 5) - Principio de Substitución de Liskov";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//jgomo3-info.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2023 Jesús Gómez
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="application/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
